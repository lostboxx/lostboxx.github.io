<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="robots" content="noindex, nofollow">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ß–∏—Å—Ç–∏–ª—å—â–∏–∫ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: white;
            color: #333;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 1rem;
        }
        
        .container {
            width: 100%;
            max-width: 700px;
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            padding: 1.5rem;
            margin-top: 1rem;
            border: 1px solid #e0e0e0;
        }
        
        h1 {
            text-align: center;
            color: #2c3e50;
            margin-bottom: 0.5rem;
            font-size: 1.8rem;
        }
        
        .description {
            text-align: center;
            color: #7f8c8d;
            margin-bottom: 1.5rem;
            font-size: 0.95rem;
            max-width: 700px;
            line-height: 1.4;
        }
        
        .upload-area {
            border: 2px dashed #3498db;
            border-radius: 8px;
            padding: 1.5rem;
            text-align: center;
            margin-bottom: 1.5rem;
            transition: all 0.3s ease;
            background-color: #f8f9fa;
            cursor: pointer;
        }
        
        .upload-area:hover {
            background-color: #e9ecef;
            border-color: #2980b9;
        }
        
        .upload-area.dragover {
            background-color: #e2e6ff;
            border-color: #2980b9;
        }
        
        .upload-icon {
            font-size: 2.5rem;
            color: #3498db;
            margin-bottom: 0.8rem;
        }
        
        .file-input {
            display: none;
        }
        
        .file-info {
            margin-top: 1rem;
            padding: 0.8rem;
            background-color: #e9ecef;
            border-radius: 6px;
            display: none;
            font-size: 0.9rem;
        }
        
        .button {
            background-color: #3498db;
            color: white;
            border: none;
            padding: 0.7rem 1.2rem;
            border-radius: 4px;
            font-size: 0.9rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 0.4rem;
            margin-top: 0.8rem;
        }
        
        .button:hover {
            background-color: #2980b9;
        }
        
        .button:disabled {
            background: #bdc3c7;
            cursor: not-allowed;
        }
        
        .download-btn {
            display: none;
            margin: 0.8rem auto;
        }
        
        .stats {
            margin-top: 1.2rem;
            padding: 0.8rem;
            background-color: #f8f9fa;
            border-radius: 6px;
            display: none;
            font-size: 0.9rem;
        }
        
        .stats h3 {
            margin-bottom: 0.4rem;
            color: #2c3e50;
        }
        
        .stats p {
            margin-bottom: 0.4rem;
        }
        
        .preview {
            margin-top: 1.5rem;
            display: none;
        }
        
        .preview h3 {
            margin-bottom: 0.8rem;
            color: #2c3e50;
        }
        
        .code-container {
            background-color: #2d2d2d;
            border-radius: 6px;
            overflow: hidden;
            margin-bottom: 0.8rem;
        }
        
        .code-header {
            background-color: #1e1e1e;
            padding: 0.4rem 0.8rem;
            color: #fff;
            font-weight: 600;
            display: flex;
            justify-content: space-between;
            font-size: 0.9rem;
        }
        
        .code-content {
            padding: 0.8rem;
            max-height: 200px;
            overflow-y: auto;
            color: #f8f8f2;
            font-family: 'Courier New', monospace;
            white-space: pre-wrap;
            font-size: 0.85rem;
        }
        
        .tabs {
            display: flex;
            margin-bottom: 1rem;
            border-bottom: 1px solid #dee2e6;
        }
        
        .tab {
            padding: 0.4rem 0.8rem;
            cursor: pointer;
            border-bottom: 2px solid transparent;
            font-size: 0.9rem;
        }
        
        .tab.active {
            border-bottom: 2px solid #3498db;
            color: #3498db;
            font-weight: 600;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
    </style>
</head>
<body>
    <h1>–ß–∏—Å—Ç–∏–ª—å—â–∏–∫ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤</h1>
    <p class="description">–ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–∞–π–ª HTML, CSS, JS –∏–ª–∏ –¥—Ä—É–≥–æ–π —Ç–µ–∫—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤</p>
    
    <div class="container">
        <div class="tabs">
            <div class="tab active" data-tab="upload">–ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–∞</div>
            <div class="tab" data-tab="result">–†–µ–∑—É–ª—å—Ç–∞—Ç</div>
        </div>
        
        <div class="tab-content active" id="upload-tab">
            <div class="upload-area" id="uploadArea">
                <div class="upload-icon">üìÅ</div>
                <h3>–ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ —Ñ–∞–π–ª —Å—é–¥–∞</h3>
                <p>–∏–ª–∏</p>
                <button class="button" id="browseBtn">–í—ã–±–µ—Ä–∏—Ç–µ —Ñ–∞–π–ª</button>
                <input type="file" id="fileInput" class="file-input" accept=".html,.js,.css,.txt">
            </div>
            
            <div class="file-info" id="fileInfo">
                <h3>–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ñ–∞–π–ª–µ:</h3>
                <p id="fileName">–ò–º—è —Ñ–∞–π–ª–∞: -</p>
                <p id="fileSize">–†–∞–∑–º–µ—Ä: -</p>
                <p id="fileType">–¢–∏–ø: -</p>
            </div>
            
            <button class="button" id="processBtn" disabled>–û—á–∏—Å—Ç–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏</button>
        </div>
        
        <div class="tab-content" id="result-tab">
            <div class="stats" id="stats">
                <h3>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ—á–∏—Å—Ç–∫–∏</h3>
                <p id="originalSize">–ò—Å—Ö–æ–¥–Ω—ã–π —Ä–∞–∑–º–µ—Ä: -</p>
                <p id="cleanedSize">–†–∞–∑–º–µ—Ä –ø–æ—Å–ª–µ –æ—á–∏—Å—Ç–∫–∏: -</p>
                <p id="reduction">–°–æ–∫—Ä–∞—â–µ–Ω–∏–µ: -</p>
                <p id="commentsRemoved">–£–¥–∞–ª–µ–Ω–æ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤: -</p>
            </div>
            
            <div class="preview" id="preview">
                <h3>–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä</h3>
                <div class="code-container">
                    <div class="code-header">
                        <span>–ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥</span>
                    </div>
                    <div class="code-content" id="originalCode"></div>
                </div>
                
                <div class="code-container">
                    <div class="code-header">
                        <span>–û—á–∏—â–µ–Ω–Ω—ã–π –∫–æ–¥</span>
                    </div>
                    <div class="code-content" id="cleanedCode"></div>
                </div>
            </div>
            
            <button class="button download-btn" id="downloadBtn">
                <span>üì•</span> –°–∫–∞—á–∞—Ç—å –æ—á–∏—â–µ–Ω–Ω—ã–π —Ñ–∞–π–ª
            </button>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // –≠–ª–µ–º–µ–Ω—Ç—ã DOM
            const uploadArea = document.getElementById('uploadArea');
            const fileInput = document.getElementById('fileInput');
            const browseBtn = document.getElementById('browseBtn');
            const fileInfo = document.getElementById('fileInfo');
            const fileName = document.getElementById('fileName');
            const fileSize = document.getElementById('fileSize');
            const fileType = document.getElementById('fileType');
            const processBtn = document.getElementById('processBtn');
            const downloadBtn = document.getElementById('downloadBtn');
            const stats = document.getElementById('stats');
            const originalSize = document.getElementById('originalSize');
            const cleanedSize = document.getElementById('cleanedSize');
            const reduction = document.getElementById('reduction');
            const commentsRemoved = document.getElementById('commentsRemoved');
            const preview = document.getElementById('preview');
            const originalCode = document.getElementById('originalCode');
            const cleanedCode = document.getElementById('cleanedCode');
            const tabs = document.querySelectorAll('.tab');
            const tabContents = document.querySelectorAll('.tab-content');
            
            let currentFile = null;
            let cleanedContent = '';
            
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π –¥–ª—è –≤–∫–ª–∞–¥–æ–∫
            tabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    const tabId = tab.getAttribute('data-tab');
                    
                    // –ê–∫—Ç–∏–≤–∏—Ä—É–µ–º –≤—ã–±—Ä–∞–Ω–Ω—É—é –≤–∫–ª–∞–¥–∫—É
                    tabs.forEach(t => t.classList.remove('active'));
                    tab.classList.add('active');
                    
                    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç
                    tabContents.forEach(content => {
                        content.classList.remove('active');
                        if (content.id === `${tabId}-tab`) {
                            content.classList.add('active');
                        }
                    });
                });
            });
            
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤
            browseBtn.addEventListener('click', () => {
                fileInput.click();
            });
            
            fileInput.addEventListener('change', handleFileSelect);
            
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è drag & drop
            uploadArea.addEventListener('dragover', (e) => {
                e.preventDefault();
                uploadArea.classList.add('dragover');
            });
            
            uploadArea.addEventListener('dragleave', () => {
                uploadArea.classList.remove('dragover');
            });
            
            uploadArea.addEventListener('drop', (e) => {
                e.preventDefault();
                uploadArea.classList.remove('dragover');
                
                if (e.dataTransfer.files.length) {
                    handleFile(e.dataTransfer.files[0]);
                }
            });
            
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –∫–Ω–æ–ø–∫–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏
            processBtn.addEventListener('click', processFile);
            
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –∫–Ω–æ–ø–∫–∏ —Å–∫–∞—á–∏–≤–∞–Ω–∏—è
            downloadBtn.addEventListener('click', downloadFile);
            
            // –§—É–Ω–∫—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤—ã–±–æ—Ä–∞ —Ñ–∞–π–ª–∞
            function handleFileSelect(e) {
                if (e.target.files.length) {
                    handleFile(e.target.files[0]);
                }
            }
            
            // –§—É–Ω–∫—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ñ–∞–π–ª–∞
            function handleFile(file) {
                currentFile = file;
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ñ–∞–π–ª–µ
                const fileExtension = file.name.split('.').pop().toLowerCase();
                fileName.textContent = `–ò–º—è —Ñ–∞–π–ª–∞: ${file.name}`;
                fileSize.textContent = `–†–∞–∑–º–µ—Ä: ${formatFileSize(file.size)}`;
                fileType.textContent = `–¢–∏–ø: ${fileExtension.toUpperCase()} —Ñ–∞–π–ª`;
                fileInfo.style.display = 'block';
                
                // –ê–∫—Ç–∏–≤–∏—Ä—É–µ–º –∫–Ω–æ–ø–∫—É –æ–±—Ä–∞–±–æ—Ç–∫–∏
                processBtn.disabled = false;
                
                // –ü–µ—Ä–µ–∫–ª—é—á–∞–µ–º—Å—è –Ω–∞ –≤–∫–ª–∞–¥–∫—É –∑–∞–≥—Ä—É–∑–∫–∏
                tabs[0].click();
            }
            
            // –§—É–Ω–∫—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ñ–∞–π–ª–∞
            function processFile() {
                if (!currentFile) return;
                
                const reader = new FileReader();
                
                reader.onload = function(e) {
                    const content = e.target.result;
                    
                    // –û—Ç–æ–±—Ä–∞–∂–∞–µ–º –∏—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥
                    originalCode.textContent = content;
                    
                    // –û—á–∏—â–∞–µ–º –≤—Å–µ –≤–æ–∑–º–æ–∂–Ω—ã–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏
                    cleanedContent = removeAllComments(content);
                    
                    // –û—Ç–æ–±—Ä–∞–∂–∞–µ–º –æ—á–∏—â–µ–Ω–Ω—ã–π –∫–æ–¥
                    cleanedCode.textContent = cleanedContent;
                    
                    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
                    showStats(content, cleanedContent);
                    
                    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫—É —Å–∫–∞—á–∏–≤–∞–Ω–∏—è –∏ –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä
                    downloadBtn.style.display = 'block';
                    preview.style.display = 'block';
                    
                    // –ü–µ—Ä–µ–∫–ª—é—á–∞–µ–º—Å—è –Ω–∞ –≤–∫–ª–∞–¥–∫—É —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
                    tabs[1].click();
                };
                
                reader.readAsText(currentFile);
            }
            
            // –§—É–Ω–∫—Ü–∏—è —É–¥–∞–ª–µ–Ω–∏—è –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤
            function removeAllComments(content) {
                let cleaned = content;
                
                // –£–¥–∞–ª—è–µ–º HTML –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ <!-- ... -->
                cleaned = cleaned.replace(/<!--[\s\S]*?-->/g, '');
                
                // –£–¥–∞–ª—è–µ–º –º–Ω–æ–≥–æ—Å—Ç—Ä–æ—á–Ω—ã–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ /* ... */
                cleaned = cleaned.replace(/\/\*[\s\S]*?\*\//g, '');
                
                // –£–¥–∞–ª—è–µ–º –æ–¥–Ω–æ—Å—Ç—Ä–æ—á–Ω—ã–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ // ...
                cleaned = cleaned.replace(/\/\/.*$/gm, '');
                
                // –£–¥–∞–ª—è–µ–º –æ—Å—Ç–∞–≤—à–∏–µ—Å—è –ø—É—Å—Ç—ã–µ —Å—Ç—Ä–æ–∫–∏
                cleaned = cleaned.replace(/^\s*[\r\n]/gm, '');
                
                return cleaned;
            }
            
            // –§—É–Ω–∫—Ü–∏—è –ø–æ–∫–∞–∑–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
            function showStats(original, cleaned) {
                const originalBytes = new Blob([original]).size;
                const cleanedBytes = new Blob([cleaned]).size;
                const reductionPercent = ((originalBytes - cleanedBytes) / originalBytes * 100).toFixed(2);
                
                // –ü–æ–¥—Å—á–∏—Ç—ã–≤–∞–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —É–¥–∞–ª–µ–Ω–Ω—ã—Ö –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤
                const htmlComments = (original.match(/<!--[\s\S]*?-->/g) || []).length;
                const multiLineComments = (original.match(/\/\*[\s\S]*?\*\//g) || []).length;
                const singleLineComments = (original.match(/\/\/.*$/gm) || []).length;
                const totalComments = htmlComments + multiLineComments + singleLineComments;
                
                originalSize.textContent = `–ò—Å—Ö–æ–¥–Ω—ã–π —Ä–∞–∑–º–µ—Ä: ${formatFileSize(originalBytes)}`;
                cleanedSize.textContent = `–†–∞–∑–º–µ—Ä –ø–æ—Å–ª–µ –æ—á–∏—Å—Ç–∫–∏: ${formatFileSize(cleanedBytes)}`;
                reduction.textContent = `–°–æ–∫—Ä–∞—â–µ–Ω–∏–µ: ${reductionPercent}%`;
                commentsRemoved.textContent = `–£–¥–∞–ª–µ–Ω–æ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤: ${totalComments}`;
                
                stats.style.display = 'block';
            }
            
            // –§—É–Ω–∫—Ü–∏—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è —Ñ–∞–π–ª–∞
            function downloadFile() {
                if (!cleanedContent || !currentFile) return;
                
                const blob = new Blob([cleanedContent], { type: 'text/plain' });
                const url = URL.createObjectURL(blob);
                
                const a = document.createElement('a');
                a.href = url;
                
                // –°–æ—Ö—Ä–∞–Ω—è–µ–º –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–µ –∏–º—è —Ñ–∞–π–ª–∞
                const originalName = currentFile.name;
                const nameWithoutExt = originalName.substring(0, originalName.lastIndexOf('.'));
                const extension = originalName.substring(originalName.lastIndexOf('.'));
                
                a.download = `${nameWithoutExt}_cleaned${extension}`;
                
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                
                URL.revokeObjectURL(url);
            }
            
            // –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–∞–∑–º–µ—Ä–∞ —Ñ–∞–π–ª–∞
            function formatFileSize(bytes) {
                if (bytes === 0) return '0 Bytes';
                
                const k = 1024;
                const sizes = ['Bytes', 'KB', 'MB', 'GB'];
                const i = Math.floor(Math.log(bytes) / Math.log(k));
                
                return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
            }
        });
    </script>
</body>
</html>