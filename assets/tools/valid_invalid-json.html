<!DOCTYPE html>
<html>
<head>
 <meta charset="UTF-8">
  <meta name="robots" content="noindex, follow">
    <title>JSON Validator</title>
  <style>
    body { margin: 10px; font-family: Arial; }
    textarea { width: 100%; height: 200px; }
    #result { margin-top: 5px; min-height: 20px; }
  </style>
</head>
<body>
  <input type="file" id="fileInput" accept=".json" style="margin-bottom:5px;">
  <textarea id="jsonInput" placeholder="Или вставьте JSON"></textarea>
  <button onclick="validateJson()">Проверить</button>
  <div id="result"></div>

  <script>
    // Загрузка файла
    document.getElementById('fileInput').addEventListener('change', function(e) {
      const file = e.target.files[0];
      if (!file) return;
      
      const reader = new FileReader();
      reader.onload = function(e) {
        // Вставляем содержимое файла в textarea
        const jsonInput = document.getElementById('jsonInput');
        jsonInput.value = e.target.result;
        
        // Форматируем JSON с отступами (если он валидный)
        try {
          const parsedJson = JSON.parse(e.target.result);
          jsonInput.value = JSON.stringify(parsedJson, null, 2);
        } catch (error) {
          // Оставляем как есть, если JSON невалидный
        }
        
        validateJson();
      };
      reader.readAsText(file);
    });

    // Валидация
    function validateJson() {
      const jsonText = document.getElementById('jsonInput').value;
      const result = document.getElementById('result');
      
      if (!jsonText.trim()) {
        result.textContent = "Введите JSON";
        result.style.color = "black";
        return;
      }
      
      try {
        JSON.parse(jsonText);
        result.textContent = "✅ Валидный";
        result.style.color = "green";
      } catch (e) {
        result.textContent = "❌ Ошибка: " + e.message.split(":")[0];
        result.style.color = "red";
      }
    }
    
    // Автоматическая проверка при вставке текста
    document.getElementById('jsonInput').addEventListener('paste', function(e) {
      setTimeout(validateJson, 10); // Небольшая задержка для получения вставленного текста
    });
    
    // Автоматическая проверка при изменении текста
    document.getElementById('jsonInput').addEventListener('input', validateJson);
  </script>
</body>
</html>