<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="robots" content="noindex, nofollow">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞ –ø–∞–º—è—Ç–∏</title>
    <style>
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    background: linear-gradient(135deg, #1cb2bc, #0a0f1a);
    color: white;
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    align-items: center;
    font-family: 'Segoe UI', Arial, sans-serif;
    padding: 20px;
    /* –û—Å—Ç–∞–≤–ª—è–µ–º —Å–∫—Ä–æ–ª–ª –∑–¥–µ—Å—å! */
    overflow-y: auto; 
}

.game-container {
    background: rgba(255, 255, 255, 0.1);
    backdrop-filter: blur(10px);
    border-radius: 20px;
    padding: 30px;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
    text-align: center;
    max-width: 600px;
    width: 100%;
    margin-bottom: 20px; 
}

h1 {
    margin-bottom: 20px;
    font-size: 2em;
    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);
}

.stats {
    display: flex;
    justify-content: space-around;
    margin: 20px 0;
    font-size: 1.2em;
}

.level {
    color: #44ff44;
    font-weight: bold;
}

/* –ö–ª—é—á–µ–≤—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è: –ü–µ—Ä–µ–∫–ª—é—á–∞–µ–º—Å—è –Ω–∞ Flexbox –¥–ª—è –ø–µ—Ä–µ–Ω–æ—Å–∞! */
.cards-container {
    /* –ú–µ–Ω—è–µ–º display –Ω–∞ flex */
    display: flex;
    /* –†–∞–∑—Ä–µ—à–∞–µ–º –ø–µ—Ä–µ–Ω–æ—Å –Ω–∞ —Å–ª–µ–¥—É—é—â—É—é —Å—Ç—Ä–æ–∫—É */
    flex-wrap: wrap; 
    /* –ö–∞—Ä—Ç–æ—á–∫–∏ –±—É–¥—É—Ç —Ä–∞—Å–ø–æ–ª–∞–≥–∞—Ç—å—Å—è –ø–æ —Ü–µ–Ω—Ç—Ä—É, –Ω–æ –ø–µ—Ä–µ–Ω–æ—Å–∏—Ç—å—Å—è –≤–Ω–∏–∑ */
    justify-content: center;
    
    gap: 15px;
    margin: 30px 0;
    
    /* –£–î–ê–õ–ï–ù–û: –≤—Å–µ grid-—Å–≤–æ–π—Å—Ç–≤–∞ */
    padding-right: 0; 
    align-content: start; 
}

.card {
    background: #1168c2;
    border-radius: 10px;
    padding: 15px;
    min-height: 100px;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    font-size: 16px;
    font-weight: bold;
    transition: all 0.3s ease;
    position: relative;
    
    /* –°–∞–º–æ–µ –≤–∞–∂–Ω–æ–µ! –ì–æ–≤–æ—Ä–∏–º Flex-—ç–ª–µ–º–µ–Ω—Ç—É, —á—Ç–æ–±—ã –æ–Ω –Ω–µ —Å–∂–∏–º–∞–ª—Å—è */
    flex-shrink: 0; 
    /* –ò –¥–∞—ë–º –µ–º—É —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—É—é —à–∏—Ä–∏–Ω—É, —á—Ç–æ–±—ã –æ–Ω –ø–µ—Ä–µ–Ω–æ—Å–∏–ª—Å—è –ø—Ä–∏ –Ω–µ—Ö–≤–∞—Ç–∫–µ –º–µ—Å—Ç–∞ */
    width: 140px; 
    min-width: 140px; /* –î–ª—è –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç–∏ */
}

.card.hidden {
    background: #2a2a2a;
}

.card.hidden .card-word {
    display: none;
}

.card.hidden .card-input {
    display: block;
}

.card-word {
    font-size: 18px;
    margin-bottom: 10px;
    word-break: break-word; 
    text-align: center;
}

.card-input {
    display: none;
    width: 90%;
    padding: 8px;
    border: none;
    border-radius: 5px;
    font-size: 14px;
    text-align: center;
    margin-top: 5px;
    color: #0a0f1a;
}

.card-input:focus {
    outline: 2px solid #44ff44;
}

.check-btn {
    display: none;
    background: #44ff44;
    color: #000;
    border: none;
    padding: 6px 12px;
    border-radius: 5px;
    cursor: pointer;
    font-size: 12px;
    font-weight: bold;
    margin-top: 8px;
}

.card.hidden .check-btn {
    display: block;
}

.controls {
    display: flex;
    gap: 12px;
    justify-content: center;
    margin: 20px 0 10px;
    flex-wrap: nowrap;
}

button {
    background: #1168c2;
    color: white;
    border: none;
    padding: 12px 24px;
    border-radius: 8px;
    cursor: pointer;
    font-size: 16px;
    font-weight: bold;
    transition: all 0.3s ease;
}

button:hover {
    background: #0d5aa6;
    transform: scale(1.05);
}

.reset-btn {
    background: #ff4444;
    padding: 8px 16px;
    font-size: 14px;
}

.reset-btn:hover {
    background: #cc3333;
}

.message {
    height: 30px;
    margin: 10px 0;
    font-weight: bold;
    opacity: 0;
    transition: opacity 0.3s ease;
}

.message.show {
    opacity: 1;
}

.message.success {
    color: #44ff44;
}

.message.error {
    color: #ff4444;
}

.timer {
    font-size: 1.5em;
    margin: 10px 0;
    color: #ffcc00;
}

@keyframes fadeIn {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
}

.fade-in {
    animation: fadeIn 0.6s ease;
}

@media (max-width: 768px) {
    /* –ù–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö —Å–æ—Ö—Ä–∞–Ω—è–µ–º Flexbox –∏ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—É—é —à–∏—Ä–∏–Ω—É */
    .cards-container {
        /* –ù–∏—á–µ–≥–æ –Ω–µ –º–µ–Ω—è–µ–º, –ø—Ä–æ—Å—Ç–æ —É–±–∏—Ä–∞–µ–º —Å—Ç–∞—Ä—ã–π Grid */
    }
    
    .card {
        min-height: 90px;
        padding: 12px;
        /* –£–º–µ–Ω—å—à–∞–µ–º —à–∏—Ä–∏–Ω—É –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö, –Ω–æ –Ω–µ –¥–∞–µ–º —Å–∂–∏–º–∞—Ç—å—Å—è */
        width: 120px;
        min-width: 120px; 
    }
    
    .card-word {
        font-size: 16px;
    }
}
      
    </style>
</head>
<body>
    <div class="game-container fade-in">
        <h1>üß† –¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞ –ø–∞–º—è—Ç–∏</h1>
        
        <div class="stats">
            <div>–£—Ä–æ–≤–µ–Ω—å: <span class="level" id="level">1</span></div>
            <div>–ö–∞—Ä—Ç–æ—á–µ–∫: <span id="cardCount">2</span></div>
        </div>

        <div class="timer" id="timer">5</div>
        
        <div class="message" id="message"></div>
        
        <div class="cards-container" id="cardsContainer">
            <!-- –ö–∞—Ä—Ç–æ—á–∫–∏ –±—É–¥—É—Ç —Å–æ–∑–¥–∞–Ω—ã —á–µ—Ä–µ–∑ JavaScript -->
        </div>
        
        <div class="controls">
            <button onclick="startLevel()">üéÆ –ù–∞—á–∞—Ç—å —É—Ä–æ–≤–µ–Ω—å</button>
            <button class="reset-btn" onclick="resetGame()">üîÑ –°–±—Ä–æ—Å–∏—Ç—å –∏–≥—Ä—É</button>
        </div>
    </div>

    <script>
        // –ë–æ–≥–∞—Ç—ã–π —Å–ª–æ–≤–∞—Ä—å –Ω–µ–π—Ç—Ä–∞–ª—å–Ω—ã—Ö —Å–ª–æ–≤
        const wordDictionary = [
            "–∫–æ–º–ø—å—é—Ç–µ—Ä", "—á–µ–ª–æ–≤–µ–∫", "–ø–æ–¥—É—à–∫–∞", "—Å–æ–ª–Ω—Ü–µ", "–æ–∫–Ω–æ", "–∫–Ω–∏–≥–∞", "—Å—Ç–æ–ª", "—Å—Ç—É–ª",
            "—Ç–µ–ª–µ—Ñ–æ–Ω", "–∫–æ—à–∫–∞", "—Å–æ–±–∞–∫–∞", "–¥–µ—Ä–µ–≤–æ", "—Ü–≤–µ—Ç–æ–∫", "–º–∞—à–∏–Ω–∞", "–¥–æ–º", "–≥–æ—Ä–æ–¥",
            "—Ä–µ–∫–∞", "–≥–æ—Ä–∞", "–º–æ—Ä–µ", "–Ω–µ–±–æ", "–∑–≤–µ–∑–¥–∞", "–ª—É–Ω–∞", "–ø—Ç–∏—Ü–∞", "—Ä—ã–±–∞",
            "—Ö–ª–µ–±", "–≤–æ–¥–∞", "–º–æ–ª–æ–∫–æ", "—è–±–ª–æ–∫–æ", "–±–∞–Ω–∞–Ω", "–∞–ø–µ–ª—å—Å–∏–Ω", "–ø–æ–º–∏–¥–æ—Ä", "–æ–≥—É—Ä–µ—Ü",
            "—à–∫–æ–ª–∞", "—É—á–∏—Ç–µ–ª—å", "—É—á–µ–Ω–∏–∫", "–¥—Ä—É–≥", "—Å–µ–º—å—è", "—Ä–∞–±–æ—Ç–∞", "–æ—Ç–¥—ã—Ö", "—Å–ø–æ—Ä—Ç",
            "–º—É–∑—ã–∫–∞", "—Ñ–∏–ª—å–º", "–∏–≥—Ä–∞", "–≤—Ä–µ–º—è", "—á–∏—Å–ª–æ", "–±—É–∫–≤–∞", "—Å–ª–æ–≤–æ", "–ø—Ä–µ–¥–º–µ—Ç",
            "—É—Ç—Ä–æ", "–¥–µ–Ω—å", "–≤–µ—á–µ—Ä", "–Ω–æ—á—å", "–∑–∏–º–∞", "–≤–µ—Å–Ω–∞", "–ª–µ—Ç–æ", "–æ—Å–µ–Ω—å",
            "–¥–æ—Ä–æ–≥–∞", "—É–ª–∏—Ü–∞", "–ø–ª–æ—â–∞–¥—å", "–ø–∞—Ä–∫", "–ª–µ—Å", "–ø–æ–ª–µ", "—Å–∞–¥", "–æ–≥–æ—Ä–æ–¥",
            "—Ä—É—á–∫–∞", "–∫–∞—Ä–∞–Ω–¥–∞—à", "—Ç–µ—Ç—Ä–∞–¥—å", "–∞–ª—å–±–æ–º", "–∫—Ä–∞—Å–∫–∞", "–∫–∏—Å—Ç—å", "–Ω–æ–∂–Ω–∏—Ü—ã", "–∫–ª–µ–π",
            "—á–∞—Å—ã", "–∑–µ—Ä–∫–∞–ª–æ", "–ø–æ–ª–æ—Ç–µ–Ω—Ü–µ", "–º—ã–ª–æ", "—à–∞–º–ø—É–Ω—å", "—Ä–∞—Å—á–µ—Å–∫–∞", "–∑—É–±—ã", "—â–µ—Ç–∫–∞",
            "–∫–æ—Ñ–µ", "—á–∞–π", "—Å–∞—Ö–∞—Ä", "—Å–æ–ª—å", "–ø–µ—Ä–µ—Ü", "–º–∞—Å–ª–æ", "—Å—ã—Ä", "–∫–æ–ª–±–∞—Å–∞",
            "–ø–æ–µ–∑–¥", "—Å–∞–º–æ–ª–µ—Ç", "–∫–æ—Ä–∞–±–ª—å", "–∞–≤—Ç–æ–±—É—Å", "—Ç—Ä–∞–º–≤–∞–π", "–º–µ—Ç—Ä–æ", "—Ç–∞–∫—Å–∏", "–≤–µ–ª–æ—Å–∏–ø–µ–¥"
        ];

        let currentLevel = 1;
        let currentWords = [];
        let gameState = 'waiting'; // waiting, showing, guessing
        let timerValue = 5;
        let timerInterval = null;

        const levelElement = document.getElementById('level');
        const cardCountElement = document.getElementById('cardCount');
        const cardsContainer = document.getElementById('cardsContainer');
        const messageElement = document.getElementById('message');
        const timerElement = document.getElementById('timer');

        // –ó–∞–≥—Ä—É–∑–∫–∞ —É—Ä–æ–≤–Ω—è –∏–∑ IndexedDB
        async function loadGame() {
            try {
                const db = await openDB();
                const level = await getFromDB(db, 'memoryGame', 'level');
                if (level !== undefined) {
                    currentLevel = level;
                    updateUI();
                }
            } catch (error) {
                console.log('–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å:', error);
            }
        }

        // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —É—Ä–æ–≤–Ω—è –≤ IndexedDB
        async function saveGame() {
            try {
                const db = await openDB();
                await saveToDB(db, 'memoryGame', 'level', currentLevel);
            } catch (error) {
                console.log('–ù–µ —É–¥–∞–ª–æ—Å—å —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å:', error);
            }
        }

        // IndexedDB —Ñ—É–Ω–∫—Ü–∏–∏
        function openDB() {
            return new Promise((resolve, reject) => {
                const request = indexedDB.open('LostBoxGames', 1);
                
                request.onerror = () => reject(request.error);
                request.onsuccess = () => resolve(request.result);
                
                request.onupgradeneeded = (event) => {
                    const db = event.target.result;
                    if (!db.objectStoreNames.contains('gameData')) {
                        db.createObjectStore('gameData');
                    }
                };
            });
        }

        function saveToDB(db, storeName, key, value) {
            return new Promise((resolve, reject) => {
                const transaction = db.transaction([storeName], 'readwrite');
                const store = transaction.objectStore(storeName);
                const request = store.put(value, key);
                
                request.onerror = () => reject(request.error);
                request.onsuccess = () => resolve(request.result);
            });
        }

        function getFromDB(db, storeName, key) {
            return new Promise((resolve, reject) => {
                const transaction = db.transaction([storeName], 'readonly');
                const store = transaction.objectStore(storeName);
                const request = store.get(key);
                
                request.onerror = () => reject(request.error);
                request.onsuccess = () => resolve(request.result);
            });
        }

        // –ó–∞–ø—É—Å–∫ —É—Ä–æ–≤–Ω—è
        function startLevel() {
            if (gameState !== 'waiting') return;
            
            gameState = 'showing';
            generateWords();
            createCards();
            startTimer();
        }

        // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–ª—É—á–∞–π–Ω—ã—Ö —Å–ª–æ–≤
        function generateWords() {
            const wordCount = currentLevel + 1; // –ù–∞—á–∏–Ω–∞–µ–º —Å 2 —Å–ª–æ–≤
            currentWords = [];
            
            // –í—ã–±–∏—Ä–∞–µ–º —Å–ª—É—á–∞–π–Ω—ã–µ —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ —Å–ª–æ–≤–∞
            const shuffled = [...wordDictionary].sort(() => 0.5 - Math.random());
            currentWords = shuffled.slice(0, wordCount);
        }

        // –°–æ–∑–¥–∞–Ω–∏–µ –∫–∞—Ä—Ç–æ—á–µ–∫
        function createCards() {
            cardsContainer.innerHTML = '';
            const columns = Math.min(currentWords.length, 4);
            cardsContainer.style.gridTemplateColumns = `repeat(${columns}, 1fr)`;
            
            currentWords.forEach((word, index) => {
                const card = document.createElement('div');
                card.className = 'card';
                card.dataset.index = index;
                card.dataset.word = word;
                
                // –°–ª–æ–≤–æ
                const wordElement = document.createElement('div');
                wordElement.className = 'card-word';
                wordElement.textContent = word;
                
                // Input –¥–ª—è –≤–≤–æ–¥–∞
                const inputElement = document.createElement('input');
                inputElement.type = 'text';
                inputElement.className = 'card-input';
                inputElement.placeholder = '–í–≤–µ–¥–∏—Ç–µ —Å–ª–æ–≤–æ...';
                inputElement.dataset.index = index;
                
                // –ö–Ω–æ–ø–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏
                const checkButton = document.createElement('button');
                checkButton.className = 'check-btn';
                checkButton.textContent = '‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å';
                checkButton.onclick = () => checkAnswer(index);
                
                card.appendChild(wordElement);
                card.appendChild(inputElement);
                card.appendChild(checkButton);
                cardsContainer.appendChild(card);
            });
        }

        // –¢–∞–π–º–µ—Ä –ø–æ–∫–∞–∑–∞ –∫–∞—Ä—Ç–æ—á–µ–∫
        function startTimer() {
            timerValue = 5;
            timerElement.textContent = timerValue;
            
            timerInterval = setInterval(() => {
                timerValue--;
                timerElement.textContent = timerValue;
                
                if (timerValue <= 0) {
                    clearInterval(timerInterval);
                    hideCards();
                }
            }, 1000);
        }

        // –°–∫—Ä—ã—Ç—å –∫–∞—Ä—Ç–æ—á–∫–∏
        function hideCards() {
            gameState = 'guessing';
            const cards = document.querySelectorAll('.card');
            cards.forEach(card => {
                card.classList.add('hidden');
                // –§–æ–∫—É—Å–∏—Ä—É–µ–º—Å—è –Ω–∞ –ø–µ—Ä–≤–æ–º input
                const firstInput = card.querySelector('.card-input');
                if (firstInput) {
                    firstInput.focus();
                }
            });
            
            timerElement.textContent = '–í–≤–æ–¥–∏—Ç–µ —Å–ª–æ–≤–∞!';
        }

        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Ç–≤–µ—Ç–∞ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –∫–∞—Ä—Ç–æ—á–∫–∏
        function checkAnswer(cardIndex) {
            const card = document.querySelector(`.card[data-index="${cardIndex}"]`);
            const input = card.querySelector('.card-input');
            const userAnswer = input.value.trim().toLowerCase();
            const correctWord = card.dataset.word.toLowerCase();
            
            if (userAnswer === correctWord) {
                card.style.background = '#44ff44';
                input.disabled = true;
                showMessage(`–ö–∞—Ä—Ç–æ—á–∫–∞ ${cardIndex + 1}: –ü—Ä–∞–≤–∏–ª—å–Ω–æ! ‚úÖ`, 'success');
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –≤—Å–µ –ª–∏ –∫–∞—Ä—Ç–æ—á–∫–∏ —É–≥–∞–¥–∞–Ω—ã
                checkAllCardsGuessed();
            } else {
                card.style.background = '#ff4444';
                showMessage(`–ö–∞—Ä—Ç–æ—á–∫–∞ ${cardIndex + 1}: –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ! ‚ùå`, 'error');
                input.focus();
            }
        }

        // –ü—Ä–æ–≤–µ—Ä–∫–∞, –≤—Å–µ –ª–∏ –∫–∞—Ä—Ç–æ—á–∫–∏ —É–≥–∞–¥–∞–Ω—ã
        function checkAllCardsGuessed() {
            const inputs = document.querySelectorAll('.card-input');
            const allGuessed = Array.from(inputs).every(input => input.disabled);
            
            if (allGuessed) {
                showMessage('–í—Å–µ –∫–∞—Ä—Ç–æ—á–∫–∏ —É–≥–∞–¥–∞–Ω—ã! –£—Ä–æ–≤–µ–Ω—å –ø—Ä–æ–π–¥–µ–Ω! üéâ', 'success');
                setTimeout(() => {
                    nextLevel();
                }, 2000);
            }
        }

        // Enter –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –æ—Ç–≤–µ—Ç–∞
        function setupInputListeners() {
            const inputs = document.querySelectorAll('.card-input');
            inputs.forEach(input => {
                input.addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') {
                        const cardIndex = parseInt(input.dataset.index);
                        checkAnswer(cardIndex);
                    }
                });
            });
        }

        // –°–ª–µ–¥—É—é—â–∏–π —É—Ä–æ–≤–µ–Ω—å
        function nextLevel() {
            currentLevel++;
            gameState = 'waiting';
            updateUI();
            saveGame();
            showMessage(`–£—Ä–æ–≤–µ–Ω—å ${currentLevel}!`, 'success');
        }

        // –°–±—Ä–æ—Å –∏–≥—Ä—ã
        async function resetGame() {
            currentLevel = 1;
            gameState = 'waiting';
            clearInterval(timerInterval);
            updateUI();
            
            try {
                const db = await openDB();
                await saveToDB(db, 'memoryGame', 'level', 1);
            } catch (error) {
                console.log('–ù–µ —É–¥–∞–ª–æ—Å—å —Å–±—Ä–æ—Å–∏—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å:', error);
            }
            
            showMessage('–ò–≥—Ä–∞ —Å–±—Ä–æ—à–µ–Ω–∞!', 'success');
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
        function updateUI() {
            levelElement.textContent = currentLevel;
            cardCountElement.textContent = currentLevel + 1;
            cardsContainer.innerHTML = '';
            timerElement.textContent = '5';
        }

        // –ü–æ–∫–∞–∑–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ
        function showMessage(text, type) {
            messageElement.textContent = text;
            messageElement.className = `message show ${type}`;
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        document.addEventListener('DOMContentLoaded', () => {
            loadGame();
            updateUI();
        });
    </script>
</body>
</html>